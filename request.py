import requests
import json

url = "http://localhost:5000/check_coordinates"

# Sample GeoJSON and coordinates
geojson = {
    "type": "FeatureCollection",
    "features": [{
        "type": "Feature",
        "geometry": {
            "type": "Polygon",
            "coordinates": [[
                [-123.1862995, 49.2750749, 0],
                [-123.1852695, 49.2199418, 0],
                [-123.1277629, 49.2005409, 0],
                [-123.125703, 49.19728799999999, 0],
                [-123.1332561, 49.1949323, 0],
                [-123.1421825, 49.1796736, 0],
                [-123.1524822, 49.17518489999999, 0],
                [-123.1607219, 49.1733893, 0],
                [-123.1933376, 49.1738382, 0],
                [-123.1923076, 49.1255573, 0],
                [-123.0755779, 49.126456, 0],
                [-123.0615017, 49.1379127, 0],
                [-123.061845, 49.2018868, 0],
                [-123.0910274, 49.1980732, 0],
                [-123.1202098, 49.2012139, 0],
                [-123.1219265, 49.20413009999999, 0],
                [-123.1109401, 49.2057002, 0],
                [-123.094804, 49.20547590000001, 0],
                [-123.0738613, 49.209289, 0],
                [-123.0590984, 49.2043544, 0],
                [-123.040559, 49.20413009999999, 0],
                [-122.9564449, 49.1942592, 0],
                [-122.9368755, 49.2007652, 0],
                [-122.9179927, 49.1969514, 0],
                [-122.9183361, 49.1116257, 0],
                [-122.8829738, 49.0934189, 0],
                [-122.5310223, 49.0294138, 0],
                [-122.4961751, 49.00261889999999, 0],
                [-122.1913045, 49.00250630000001, 0],
                [-122.1942417, 49.1027862, 0],
                [-122.2854351, 49.1733585, 0],
                [-122.3424267, 49.1733585, 0],
                [-122.3664593, 49.1360849, 0],
                [-122.3190807, 49.1221563, 0],
                [-122.3190807, 49.1113701, 0],
                [-122.5776028, 49.172124, 0],
                [-122.586615, 49.17773520000001, 0],
                [-122.5891899, 49.18390670000001, 0],
                [-122.5891041, 49.189741, 0],
                [-122.5561542, 49.1807927, 0],
                [-122.5424213, 49.2631988, 0],
                [-122.6086826, 49.2627507, 0],
                [-122.6291962, 49.23563330000001, 0],
                [-122.6667042, 49.23490470000001, 0],
                [-122.7235241, 49.24868959999999, 0],
                [-122.7245884, 49.3070924, 0],
                [-122.8375416, 49.3086593, 0],
                [-122.8924733, 49.29298790000001, 0],
                [-122.8931599, 49.26633519999999, 0],
                [-122.9456883, 49.26633519999999, 0],
                [-122.9858571, 49.3066447, 0],
                [-122.9865437, 49.3314857, 0],
                [-123.117693, 49.33338749999999, 0],
                [-123.1353741, 49.3151502, 0],
                [-123.1015568, 49.3016078, 0],
                [-123.1010418, 49.29097269999999, 0],
                [-123.1322842, 49.2946672, 0],
                [-123.1539135, 49.29477919999999, 0],
                [-123.1862995, 49.2750749, 0]
            ]]
        },
        "properties": {
            "name": "Service Area"
        }
    }]
}

# Corregir el formato de las coordenadas
coordinates = "-122.6807,49.0628"

# Prepare the payload
payload = {
    "geojson": json.dumps(geojson),
    "coordinates": coordinates
}
print(payload)
# Make the POST request
response = requests.post(url, json=payload)

# Check the response
if response.status_code == 200:
    result = response.json()
    print(f"Is the point inside the polygon? {result['inside_polygon']}")
    print(f"Is the point within buffer? {result['is_within_buffer']}")
    print(f"Distance to polygon: {result['distance_to_polygon']}")
    print(f"Point: {result['point']}")
    print(f"Polygon bounds: {result['polygon_bounds']}")
    print(f"Polygon area: {result['polygon_area']}")
    print(f"Is polygon valid? {result['polygon_valid']}")
    print(f"Number of exterior coordinates: {len(result['polygon_exterior_coords'])}")
else:
    print(f"Error: {response.status_code}")
    print(response.text)
